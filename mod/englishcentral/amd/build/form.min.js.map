{"version":3,"file":"form.min.js","sources":["../src/form.js"],"sourcesContent":["\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * load the EnglishCentral player\n *\n * @module      mod_englishcentral/form\n * @category    output\n * @copyright   Gordon Bateson\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since       2.9\n */\ndefine([\"jquery\"], function($) {\n    /** @alias module:mod_englishcentral/form */\n    var FORM = {};\n\n    FORM.init = function() {\n\n        $(\"#id_studygoal\").prop(\"type\", \"hidden\");\n        $(\"#id_studygoal\").after('<span id=\"id_studygoaltext\"></span>');\n\n        $(\"#id_watchgoal, #id_learngoal, #id_speakgoal\").change(function(){\n            var watch = $(\"#id_watchgoal\").val();\n            var learn = $(\"#id_learngoal\").val();\n            var speak = $(\"#id_speakgoal\").val();\n            var mins = (isNaN(watch) ? 0 : parseInt(watch) * 6) // 6 mins per video watched\n                     + (isNaN(learn) ? 0 : parseInt(learn))     // 1 min per word learned\n                     + (isNaN(speak) ? 0 : parseInt(speak));    // 1 min per line spoken\n            $(\"#id_studygoal\").val(mins);\n            $(\"#id_studygoaltext\").text(mins);\n        });\n\n        $(\"#id_watchgoal\").trigger(\"change\");\n\n        $(\"#fgroup_id_watchgoalgroup\").after('<div class=\"mathsymbol\"> + </div>');\n        $(\"#fgroup_id_learngoalgroup\").after('<div class=\"mathsymbol\"> + </div>');\n        $(\"#fgroup_id_speakgoalgroup\").after('<div class=\"mathsymbol\"> = </div>');\n\n        // Fix layout on Boost-based themes.\n        // We want the goals to appear as boxes:\n        // [Watch] + [Learn] + [Speak] = [Study goals]\n        var goals = document.querySelector(\"#id_goals\");\n        if (goals) {\n            var selectors = [\"form-group\", \"row\", \"col-md-3\", \"d-flex\", \"col-md-9\", \"align-items-start\", \"align-self-start\"];\n            selectors.forEach(function(s){\n                goals.querySelectorAll(\".\" + s).forEach(function(elm){\n                    elm.classList.remove(s);\n                    if (s == \"form-group\") {\n                        elm.classList.add(\"d-inline-block\");\n                    }\n                    if (s == \"row\") {\n                        elm.classList.add(\"rounded\");\n                        elm.classList.add(\"px-2\");\n                        elm.classList.add(\"mb-2\");\n                        elm.classList.add(\"align-top\");\n                        elm.style.minHeight = \"80px\";\n                    }\n                });\n            });\n            goals.querySelectorAll(\".col-form-label\").forEach(function(elm){\n                for (var i=0; i < elm.children.length; i++) {\n                    var child = elm.children[i];\n                    child.classList.add(\"d-inline-block\");\n                    if (child.matches(\"[id^='fgroup_'][id$='_label']\")) {\n                        child.classList.add(\"font-weight-bold\");\n                    }\n                }\n            });\n        }\n    };\n\n    return FORM;\n});"],"names":["define","$","FORM","prop","after","change","watch","val","learn","speak","mins","isNaN","parseInt","text","trigger","goals","document","querySelector","forEach","s","querySelectorAll","elm","classList","remove","add","style","minHeight","i","children","length","child","matches"],"mappings":";;;;;;;;;AAyBAA,iCAAO,CAAC,WAAW,SAASC,OAEpBC,KAAO,CAEXA,KAAY,WAERD,EAAE,iBAAiBE,KAAK,OAAQ,UAChCF,EAAE,iBAAiBG,MAAM,uCAEzBH,EAAE,+CAA+CI,QAAO,eAChDC,MAAQL,EAAE,iBAAiBM,MAC3BC,MAAQP,EAAE,iBAAiBM,MAC3BE,MAAQR,EAAE,iBAAiBM,MAC3BG,MAAQC,MAAML,OAAS,EAAsB,EAAlBM,SAASN,SAC5BK,MAAMH,OAAS,EAAII,SAASJ,SAC5BG,MAAMF,OAAS,EAAIG,SAASH,QACxCR,EAAE,iBAAiBM,IAAIG,MACvBT,EAAE,qBAAqBY,KAAKH,SAGhCT,EAAE,iBAAiBa,QAAQ,UAE3Bb,EAAE,6BAA6BG,MAAM,qCACrCH,EAAE,6BAA6BG,MAAM,qCACrCH,EAAE,6BAA6BG,MAAM,yCAKjCW,MAAQC,SAASC,cAAc,gBAC/BF,MAAO,CACS,CAAC,aAAc,MAAO,WAAY,SAAU,WAAY,oBAAqB,oBACnFG,SAAQ,SAASC,GACvBJ,MAAMK,iBAAiB,IAAMD,GAAGD,SAAQ,SAASG,KAC7CA,IAAIC,UAAUC,OAAOJ,GACZ,cAALA,GACAE,IAAIC,UAAUE,IAAI,kBAEb,OAALL,IACAE,IAAIC,UAAUE,IAAI,WAClBH,IAAIC,UAAUE,IAAI,QAClBH,IAAIC,UAAUE,IAAI,QAClBH,IAAIC,UAAUE,IAAI,aAClBH,IAAII,MAAMC,UAAY,cAIlCX,MAAMK,iBAAiB,mBAAmBF,SAAQ,SAASG,SAClD,IAAIM,EAAE,EAAGA,EAAIN,IAAIO,SAASC,OAAQF,IAAK,KACpCG,MAAQT,IAAIO,SAASD,GACzBG,MAAMR,UAAUE,IAAI,kBAChBM,MAAMC,QAAQ,kCACdD,MAAMR,UAAUE,IAAI,kCAOjCtB"}