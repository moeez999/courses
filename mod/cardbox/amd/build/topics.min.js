define("mod_cardbox/topics",["exports","core/inplace_editable","core/notification","core/ajax","core/str"],(function(_exports,_inplace_editable,_notification,_ajax,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_notification=_interopRequireDefault(_notification),_ajax=_interopRequireDefault(_ajax);_exports.init=function(cmid){!function(cmid){document.querySelectorAll("#cardbox-topics .cardbox-edittopics-delete-button").forEach((function(btn){var topic=btn.closest("#cardbox-topic-in-review"),topicid=topic.getAttribute("data-topicid"),topictitel=topic.getAttribute("data-titel");btn.addEventListener("click",(function(){!function(cmid,topicid,topictitel){(0,_str.get_strings)([{key:"deletetopic",component:"cardbox"},{key:"deletetopicinfo",component:"cardbox",param:"'"+topictitel+"'"},{key:"yes"},{key:"cancel"}]).then((function(strings){_notification.default.confirm(strings[0],strings[1],strings[2],strings[3],(function(){_ajax.default.call([{methodname:"mod_cardbox_deletetopic",args:{topicid:topicid},done:function(){document.getElementById("cardbox-topic-"+topicid).parentElement.parentElement.remove()},fail:_notification.default.exception}])}))})).catch(_notification.default.exception)}(0,topicid,topictitel)}))})),document.querySelectorAll("#cardbox-topics .cardbox-edittopics-edit-button").forEach((function(btn){var edit=btn.closest("#cardbox-topic-in-review"),topicid=edit.getAttribute("data-topicid");btn.addEventListener("click",(function(){var topictitel=edit.getAttribute("data-titel");!function(cmid,topicid,topictitel){document.getElementById("cardbox-topic-"+topicid).classList.add("displaynone"),document.getElementById("cardbox-topic-rename-"+topicid).classList.remove("displaynone"),document.getElementById("cardbox-changedtopic-"+topicid).value=topictitel,document.getElementById("cardbox-changedtopic-"+topicid).focus(),document.getElementById("cardbox-topic-rename-"+topicid).addEventListener("keydown",(function(){if(13==window.event.keyCode){var newtopicname=document.getElementById("cardbox-changedtopic-"+topicid).value;newtopicname!=topictitel&&_ajax.default.call([{methodname:"mod_cardbox_renametopic",args:{topicid:topicid,newtopicname:newtopicname},done:function(){document.getElementById("topictitel-"+topicid).innerHTML=newtopicname,document.getElementById("cardbox-topic-"+topicid).parentElement.setAttribute("data-titel",newtopicname)},fail:_notification.default.exception}]),document.getElementById("cardbox-topic-"+topicid).classList.remove("displaynone"),document.getElementById("cardbox-topic-rename-"+topicid).classList.add("displaynone")}27==window.event.keyCode&&(document.getElementById("cardbox-topic-"+topicid).classList.remove("displaynone"),document.getElementById("cardbox-topic-rename-"+topicid).classList.add("displaynone"))})),document.getElementById("cardbox-changedtopic-"+topicid).addEventListener("blur",(function(){document.getElementById("cardbox-topic-"+topicid).classList.remove("displaynone"),document.getElementById("cardbox-topic-rename-"+topicid).classList.add("displaynone")}))}(0,topicid,topictitel)}))})),document.getElementById("cardbox-submit-new-topic").addEventListener("click",(function(){!function(cmid){var newtopic=document.getElementById("create-new-topic").value;if(""!=newtopic){var goTo=window.location.pathname+"?id="+cmid+"&action=savenewtopic&newtopic="+newtopic;window.location.href=goTo}}(cmid)}))}(cmid)}}));

//# sourceMappingURL=topics.min.js.map