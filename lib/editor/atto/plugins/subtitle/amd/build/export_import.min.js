define ("atto_subtitle/export_import",["jquery","core/log","atto_subtitle/vtthelper"],function(a,b,c){"use strict";b.debug("Atto Subtitle import/export initialising");return{exportvtt:function exportvtt(a,b){var d=document.createElement("a"),e=c.convertJsonToVtt(b);d.setAttribute("href","data:text/vtt;charset=utf-8,"+encodeURIComponent(e));d.setAttribute("download",a+".vtt");d.style.display="none";document.body.appendChild(d);d.click();document.body.removeChild(d)},init:function init(b){var d=this,e="#poodllsubtitle_dragdropsquare";a(e).on("click",function(){var a=b.fetchSubtitleData();d.exportvtt("captions",a)});a(e).on("dragover",function(b){b.preventDefault();b.stopPropagation();a(this).addClass("poodllsubtitle_dragging")});a(e).on("dragleave",function(b){b.preventDefault();b.stopPropagation();a(this).removeClass("poodllsubtitle_dragging")});a(e).on("drop",function(d){d.preventDefault();var e=d.originalEvent.dataTransfer.files;if(e.length){var g=e[0];if(g){var f=new FileReader;f.onload=function(a){var d=a.target.result;if(d){var e=c.convertVttToJson(d);b.resetData(e)}};f.readAsText(g)}else{alert("Failed to load file")}}a(this).removeClass("poodllsubtitle_dragging")})}}});
//# sourceMappingURL=export_import.min.js.map
